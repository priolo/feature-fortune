import{i as U}from"../_virtual___federation_fn_import-DhQeBkJY.js";const{useSyncExternalStore:T,useState:W,useRef:_,useEffect:w}=await U("react");function h(e){return e!==null&&typeof e=="object"}function P(e){return e!==null&&!Array.isArray(e)&&typeof e=="object"}function $(e){return typeof e=="string"||e instanceof String}function q(e){return!!k(e)}function J(e){const t=k(e);if(!t)return!1;const r=t.pathname.split(".").pop();return r==null?!1:["jpg","jpeg","png","gif"].includes(r.toLowerCase())}function k(e){let t;try{t=new URL(e)}catch{return null}return t.protocol==="http:"||t.protocol==="https:"?t:null}const Y=Object.freeze(Object.defineProperty({__proto__:null,isObject:h,isObjectStrict:P,isString:$,isUrl:q,isUrlImage:J},Symbol.toStringTag,{value:"Module"}));function z(e,t,r){return r.ignoreUndefined&&e==null&&t==null?!0:Object.is(e,t)}function x(e,t,r={}){if(!h(e)||!h(t))return z(e,t,r);for(let n in e)if(!x(e[n],t[n],r))return!1;for(let n in t)if(!e.hasOwnProperty(n))return!1;return!0}const F=Object.freeze(Object.defineProperty({__proto__:null,isEqual:z,isEqualDeep:x},Symbol.toStringTag,{value:"Module"}));function G(e,t,r){try{let{parent:n,value:s}=C(e,t);return typeof s=="function"?s.bind(n):s}catch{return r}}function H(e,t,r){let{parent:n,key:s}=C(e,t,!0);return typeof s=="number"?n.splice(s,1,r):n[s]=r}function C(e,t,r=!1){let n=e.split("."),s=t||window,u="",a;for(let o=0;o<n.length;o++){let l=n[o],c=l.indexOf("[");if(c!=-1){let f=Number(l.substring(c+1,l.length-1)),i=l.substring(0,c);a=s[i],s=a,l=f.toString(),u=l}else a=s,u=l;if(s[l]==null)if(r)s[l]={};else throw new Error(`Il parametro: ${e}; non esiste`);s=s[l]}return{parent:a,key:u,value:s}}function D(e,t,r=!1){if(r&&t==null||Object.is(e,t)||K(e,t)||B(e,t))return!0;if(typeof e=="object"&&typeof t=="object"){for(var n in e)if(!t.hasOwnProperty(n)||!D(e[n],t[n],r))return!1;return!0}return!1}function K(e,t){if(typeof e!="function"||typeof t!="function")return!1;let r=e.toString();r=r.substring(r.indexOf("{"));let n=t.toString();return n=n.substring(n.indexOf("{")),r==n}function B(e,t){return!(e instanceof Date)||!(t instanceof Date)?!1:e.getTime()==t.getTime()}function I(e,t){let r={...e},n=t.indexOf(".");if(n==-1)return r;let s=t.slice(0,n);if(r[s]==null)throw"Path non trovata";return r[s]=I(r[s],t.slice(n+1)),r}function X(e){return e.reduce((t,r)=>{const n=new Set(Object.keys(t));for(const s in r)s in t?t[s]!==r[s]&&(t[s]=null):t[s]=r[s],n.delete(s);return n.forEach(s=>t[s]=null),t},{})}function Z(e){if(e!=null)return JSON.parse(JSON.stringify(e))}function Q(e){return{...e}}function E(e,t,r=!0){if(r){if(e==null&&t!=null)return t;if(e!=null&&t==null)return e}return!h(e)||!h(t)?e:Array.isArray(e)&&Array.isArray(t)?M(e,t):Array.isArray(e)||Array.isArray(t)?e:Object.keys(e).reduce((n,s)=>(t.hasOwnProperty(s)?n[s]=E(e[s],t[s]):n[s]=e[s],n),{...t})}function M(e,t){const r=[];for(let n=0;n<e.length&&n<t.length;n++)r[n]=E(e[n],t[n]);return r.concat(e.length>t.length?e.slice(t.length):t.slice(e.length))}function R(e,t,r,n=[],s){for(const u in e){t[u]=ee(e[u]);const a=[...n,u],o=r?r(e,t,s,a):!0;h(t[u])&&o&&R(e[u],t[u],r,a,e)}return t}function ee(e){return P(e)?{}:Array.isArray(e)?[]:e}function te(e,t){const r=e.split("."),n=t.split(".");return O(r,n)}function O(e,t,r=0){if(t.length==0)return r;if(e.length<t.length)return-1;const n=e[0],s=t[0];if(r++,s==n||s==="*")return O(e.slice(1),t.slice(1),r);if(s==="?")for(let u=0;u<e.length-t.length+1;u++){let a=O(e.slice(1+u),t.slice(1),r);if(a!=-1)return u+a}return-1}const re=Object.freeze(Object.defineProperty({__proto__:null,getValueWithPath:G,setValueWithPath:H,getParentAndKey:C,objectIsIn:D,clonePath:I,minCommonProps:X,cloneDeep:Z,clone:Q,merge:E,mergeArray:M,reduceObject:R,matchPath:te,matchPathArray:O},Symbol.toStringTag,{value:"Module"}));function L(e){return!!/^[^\s@]+@[^\s@]+$/.test(e)}function ne(e){return e!=null&&e.trim().length>0}function se(e){return!!(Array.isArray(e)&&e.length>0)}function V(e){var t=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return!!t.test(e)}function A(e,t){if(!t)return!0;if(typeof t=="string"){const r=t.charAt(0)=="?";if(r&&(t=t.slice(1)),r&&e==null)return!0;const[n,s]=t.split(":");switch(n){case"email":return L(e);case"url":return V(e);case"tel":return/^[+]?[\s./0-9]*[(]?[0-9]{1,4}[)]?[-\s./0-9]*$/g.test(e);case"string":return typeof e!="string"?!1:b(e.trim().length,s);case"array":return Array.isArray(e)?b(e.length,s):!1;case"int":return Number.isInteger(e)?b(e,s):!1;case"number":return Number.isFinite(e)?b(e,s):!1}return!0}if(Array.isArray(t))return t.every(r=>A(e,r));if(typeof t=="object"){const r=Object.keys(t);for(const n of r){const s=e[n],u=t[n];if(A(s,u)==!1)return!1}}return!0}function b(e,t){if(t==null||t.length==0)return!0;let r=t.charAt(0),n;switch(isNaN(r)?n=+t.slice(1):(r="=",n=+t),r){case"=":return e==n;case">":return e>n;case"<":return e<n;case"!":return e!=n;default:return!0}}const d=Object.freeze(Object.defineProperty({__proto__:null,email:L,obligatory:ne,obligatoryArray:se,url:V,verify:A},Symbol.toStringTag,{value:"Module"}));({...F,...Y});var S=(e=>(e[e.ADD=0]="ADD",e[e.REMOVE=1]="REMOVE",e))(S||{}),j=(e=>(e.ACTION="action",e.ACTION_SYNC="action-sync",e.MUTATION="mutation",e))(j||{});const g=new Map;function N(e,t,r,n,s,u){const a={type:e,store:t,key:r,payload:n,result:s,subcall:u};if(!g.has(t))return;const o=g.get(t);if(!o)return;const l=o["*"];if(l)for(const f of l)f(a);const c=o[r];if(c)for(const f of c)f(a)}function ae({store:e,actionName:t,callback:r}){let n;g.has(e)?n=g.get(e):(n={},g.set(e,n));let s=n[t];s||(s=new Set,n[t]=s),s.add(r)}function oe({store:e,actionName:t,callback:r}){if(!g.has(e))return;const n=g.get(e);if(!n)return;const s=n[t];s&&r&&s.delete(r),(!s||s.size===0||!r)&&delete n[t],(Object.keys(n).length===0||!t)&&g.delete(e)}let m=!1;function ie(e){return e?T(e._subscribe,()=>e.state):null}function ce(e,t){return e?T(r=>e._subscribe(r,t),()=>e.state):null}function fe(e){let t={state:v(e.state),_listeners:new Set,_subscribe:(r,n)=>{var s;return r.fn=n,t._listeners.add(r),(s=t._listenerChange)==null||s.call(t,t,S.ADD),()=>{var u;t._listeners.delete(r),(u=t._listenerChange)==null||u.call(t,t,S.REMOVE)}},_update:r=>{var n;t.state={...t.state},(n=t._stateChange)==null||n.call(t,t,r);for(const s of t._listeners)(!s.fn||s.fn(t.state,r))&&s(t.state)},_listenerChange:null};return t._listenerChange=e.onListenerChange,t._stateChange=e.onStateChange,e.getters&&(t=Object.keys(e.getters).reduce((r,n)=>(r[n]=s=>e.getters[n](s,t),r),t)),e.actions&&(t=Object.keys(e.actions).reduce((r,n)=>(r[n]=async s=>{const u=m;u==!1&&(m=!0);const a=await e.actions[n](s,t);return N(j.ACTION,t,n,s,a,u),u==!1&&(m=!1),a},r),t)),e.mutators&&(t=Object.keys(e.mutators).reduce((r,n)=>(r[n]=s=>{var u;const a=e.mutators[n](s,t);if(a===void 0||Object.keys(a).every(l=>a[l]===t.state[l]))return;const o=t.state;t.state={...t.state,...a},N(j.MUTATION,t,n,s,null,m),(u=t._stateChange)==null||u.call(t,t,o);for(const l of t._listeners)(!l.fn||l.fn(t.state,o))&&l(t.state)},r),t)),t}function v(e){return e?typeof e=="function"?e():re.cloneDeep(e):{}}function ge(...e){return e.reduce((t,r)=>t==null?r:ue(t,r),null)}function ue(e,t){return!e&&!t?null:e?t?{state:typeof e.state=="function"||typeof t.state=="function"?()=>{const r=v(e.state),n=v(t.state);return{...r,...n}}:{...e.state,...t.state},mutators:{...e.mutators,...t.mutators},getters:{...e.getters,...t.getters},actions:{...e.actions,...t.actions},actionsSync:{...e.actionsSync,...t.actionsSync},onListenerChange:t.onListenerChange??e.onListenerChange,onStateChange:t.onStateChange??e.onStateChange}:e:t}let y=[];function ye(){return y.reduce((e,t)=>{const{error:r,ref:n}=t.validate();return r!=null&&(e.push({error:r,ref:n}),e.length==1&&n&&n.current!=null&&n.current.focus()),e},[])}function he(){y.forEach(e=>e.reset())}function pe(e,t,r="inputRef"){const[n,s]=W(null),u=_(null),a=_(e),o=_(!1);w(()=>{const i=y.filter(p=>p!=l);return i.push({validate:l,reset:c}),y=i,()=>{y=y.filter(p=>p.validate!=l)}},[]),w(()=>{a.current=e,!(o.current==!1&&f()!=null)&&l()},[e]);function l(){o.current=!0;const i=f();return s(i),{error:i,ref:u}}function c(){o.current=!1,s(null)}function f(){let i=null;return Object.keys(t).some(p=>i=t[p](a.current)),i}return{helperText:n,error:n!=null,[r]:u}}const be={obligatory:e=>{if(!d.obligatory(e))return"string.obligatory"},email:e=>{if(!d.email(e))return"email.syntax"},url:e=>{if(!d.url(e))return"url.syntax"},obligatoryArray:e=>{if(!d.obligatoryArray(e))return"array.obligatory"}};export{j as EVENTS_TYPES,S as LISTENER_CHANGE,ae as addWatch,fe as createStore,ge as mixStores,oe as removeWatch,he as resetAll,be as rules,ie as useStore,ce as useStoreNext,pe as useValidator,ye as validateAll};
//# sourceMappingURL=jon-URTiI5q7.js.map
