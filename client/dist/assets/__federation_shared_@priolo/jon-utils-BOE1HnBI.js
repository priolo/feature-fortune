function Y(e,t){return e.length===0?[]:e.reduce((r,n)=>{const i=r.find(s=>s.length>0&&t(s[0],n));return i?i.push(n):r.push([n]),r},[])}function H(e,t){return e.reduce((r,n)=>{const i=t(n);return r[i]||(r[i]=[]),r[i].push(n),r},{})}function Q(e,t){const r=new Map;for(const n of e){const i=t(n);r.has(i)||r.set(i,[]),r.get(i).push(n)}return Array.from(r.entries()).map(([n,i])=>({key:n,items:i}))}const Fe=Object.freeze(Object.defineProperty({__proto__:null,groupBy:Y,groupByKey:H,groupByKeyToArray:Q},Symbol.toStringTag,{value:"Module"}));function o(e){return e!==null&&typeof e=="object"}function I(e){return e!==null&&!Array.isArray(e)&&typeof e=="object"}function z(e){return typeof e=="string"||e instanceof String}function Z(e){return!!R(e)}function X(e){const t=R(e);if(!t)return!1;const r=t.pathname.split(".").pop();return r==null?!1:["jpg","jpeg","png","gif"].includes(r.toLowerCase())}function R(e){let t;try{t=new URL(e)}catch{return null}return t.protocol==="http:"||t.protocol==="https:"?t:null}const L=Object.freeze(Object.defineProperty({__proto__:null,isObject:o,isObjectStrict:I,isString:z,isUrl:Z,isUrlImage:X},Symbol.toStringTag,{value:"Module"}));function E(e,t,r){return r?.ignoreUndefined&&e==null&&t==null?!0:Object.is(e,t)}function C(e,t,r={}){if(!o(e)||!o(t))return E(e,t,r);for(let n in e)if(!C(e[n],t[n],r))return!1;for(let n in t)if(!e.hasOwnProperty(n))return!1;return!0}const j=Object.freeze(Object.defineProperty({__proto__:null,isEqual:E,isEqualDeep:C},Symbol.toStringTag,{value:"Module"}));function b(e,t,r=0,n=6){for(let i=r;i<e.length&&i<n;i++){const s=e[i];if(C(t,s))return i}return-1}function ee(e,t){const r=[],n=[...e];let i=0;for(;i<t.length;){let s=null;if(i>=n.length){const f={type:"add",val:t[i]};r.push(f),p(f,n),i++;continue}const u=n[i],l=b(t,u,i);if(l==i){i++;continue}else if(l==-1){const f=t[i],a=b(n,f,i);a==-1?s={type:"sub",from:i,val:f}:s={type:"mov",from:a,to:i},i++,r.push(s),p(s,n)}else l!=-1&&(s={type:"mov",from:i,to:l},r.push(s),p(s,n))}return t.length<n.length&&r.push({type:"len",val:t.length}),r}function p(e,t){switch(e.to==null&&(e.to=0),e.from==null&&(e.from=0),e.type){case"del":t.splice(e.from,1);break;case"mov":const r=t[e.to];t[e.to]=t[e.from],t[e.from]=r;break;case"sub":t[e.from]=e.val;break;case"ins":t.splice(e.from,0,e.val);break;case"add":t.push(e.val);break;case"len":t.length=e.val;break}}function te(e,t){const r=[...e];return t.forEach(n=>p(n,r)),r}d.NO_DIFFERENCE_KEY="__no-difference__";function d(e,t){if(!o(e)||!o(t))return E(e,t)?d.NO_DIFFERENCE_KEY:t;if(Array.isArray(e)&&Array.isArray(t))return ee(e,t);if(Array.isArray(e)||Array.isArray(t))return t;const r={};for(let n in e)if(t.hasOwnProperty(n)){let i=d(e[n],t[n]);i!=d.NO_DIFFERENCE_KEY&&(r[n]=i)}else r._deleted==null&&(r._deleted=[]),r._deleted.push(n);for(let n in t)e.hasOwnProperty(n)||(r[n]=t[n]);return Object.keys(r).length==0?d.NO_DIFFERENCE_KEY:r}function $(e,t){if(!o(t))return t;let r={};for(let n in t)n!="_deleted"&&(Array.isArray(e[n])?r[n]=te(e[n],t[n]):r[n]=$(e[n],t[n]));if(!o(e))return r;for(let n in e)Object.keys(t).some(i=>i==n)||t._deleted&&t._deleted.some(i=>i==n)||(r[n]=e[n]);return r}const Te=Object.freeze(Object.defineProperty({__proto__:null,add:$,diff:d},Symbol.toStringTag,{value:"Module"}));function re(e,t,r){try{let{parent:n,value:i}=F(e,t);return typeof i=="function"?i.bind(n):i}catch{return r}}function ne(e,t,r){let{parent:n,key:i}=F(e,t,!0);return typeof i=="number"?n.splice(i,1,r):n[i]=r}function F(e,t,r=!1){let n=e.split("."),i=t||window,s="",u;for(let l=0;l<n.length;l++){let f=n[l],a=f.indexOf("[");if(a!=-1){let G=Number(f.substring(a+1,f.length-1)),J=f.substring(0,a);u=i[J],i=u,f=G.toString(),s=f}else u=i,s=f;if(i[f]==null)if(r)i[f]={};else throw new Error(`Il parametro: ${e}; non esiste`);i=i[f]}return{parent:u,key:s,value:i}}function v(e,t,r=!1){if(r&&t==null||Object.is(e,t)||ie(e,t)||se(e,t))return!0;if(typeof e=="object"&&typeof t=="object"){for(var n in e)if(!t.hasOwnProperty(n)||!v(e[n],t[n],r))return!1;return!0}return!1}function ie(e,t){if(typeof e!="function"||typeof t!="function")return!1;let r=e.toString();r=r.substring(r.indexOf("{"));let n=t.toString();return n=n.substring(n.indexOf("{")),r==n}function se(e,t){return!(e instanceof Date)||!(t instanceof Date)?!1:e.getTime()==t.getTime()}function U(e,t){let r={...e},n=t.indexOf(".");if(n==-1)return r;let i=t.slice(0,n);if(r[i]==null)throw"Path non trovata";return r[i]=U(r[i],t.slice(n+1)),r}function ue(e){return e.reduce((t,r)=>{const n=new Set(Object.keys(t));for(const i in r)i in t?t[i]!==r[i]&&(t[i]=null):t[i]=r[i],n.delete(i);return n.forEach(i=>t[i]=null),t},{})}function le(e){if(e!=null)return JSON.parse(JSON.stringify(e))}function fe(e){return{...e}}function S(e,t,r=!0){if(r){if(e==null&&t!=null)return t;if(e!=null&&t==null)return e}return!o(e)||!o(t)?e:Array.isArray(e)&&Array.isArray(t)?q(e,t):Array.isArray(e)||Array.isArray(t)?e:Object.keys(e).reduce((n,i)=>(t.hasOwnProperty(i)?n[i]=S(e[i],t[i]):n[i]=e[i],n),{...t})}function q(e,t){const r=[];for(let n=0;n<e.length&&n<t.length;n++)r[n]=S(e[n],t[n]);return r.concat(e.length>t.length?e.slice(t.length):t.slice(e.length))}function B(e,t,r,n=[],i){for(const s in e){t[s]=oe(e[s]);const u=[...n,s],l=r?r(e,t,i,u):!0;o(t[s])&&l&&B(e[s],t[s],r,u,e)}return t}function oe(e){return I(e)?{}:Array.isArray(e)?[]:e}function ce(e,t){const r=e.split("."),n=t.split(".");return A(r,n)}function A(e,t,r=0){if(t.length==0)return r;if(e.length<t.length)return-1;const n=e[0],i=t[0];if(r++,i==n||i==="*")return A(e.slice(1),t.slice(1),r);if(i==="?")for(let s=0;s<e.length-t.length+1;s++){let u=A(e.slice(1+s),t.slice(1),r);if(u!=-1)return s+u}return-1}const be=Object.freeze(Object.defineProperty({__proto__:null,clone:fe,cloneDeep:le,clonePath:U,getParentAndKey:F,getValueWithPath:re,matchPath:ce,matchPathArray:A,merge:S,mergeArray:q,minCommonProps:ue,objectIsIn:v,reduceObject:B,setValueWithPath:ne},Symbol.toStringTag,{value:"Module"})),P="key-not-found";function ae(e,t,r=!1){Array.isArray(t)||(t=[t]);const n=t.reduce((i,s)=>i.concat(O(e,s)),[]).flat();return r?n:n.filter(i=>!i.error)}function O(e,t){if(Array.isArray(e))return e.map((u,l)=>O(u,t)).flat();const r=t.indexOf(".");if(r==-1){const u={parent:e,key:t};return t in e||(u.error=P),u}const n=t.slice(0,r),i=t.slice(r+1);if(!(n in e))return{parent:e,key:n,error:P};const s=e[n];return O(s,i)}function ye(e,t){return Array.isArray(t)||(t=[t]),t.reduce((n,i)=>{const s=w(e,i);return s==null?n:S(s,n)},{})}function w(e,t){if(!o(e)||!z(t))return null;if(Array.isArray(e))return e.map((u,l)=>w(u,t));const r=t.indexOf(".");if(r==-1)return t in e?{[t]:e[t]}:null;const n=t.slice(0,r),i=t.slice(r+1),s=e[n];return{[n]:w(s,i)}}const Ne=Object.freeze(Object.defineProperty({__proto__:null,KEY_NOT_FOUND:P,explore:O,exploreMap:ae,include:w,includeMap:ye},Symbol.toStringTag,{value:"Module"}));function k(e){return Array.isArray(e)?JSON.stringify(e.map(t=>k(t))):typeof e=="string"?`"${e}"`:typeof e=="object"&&e!==null?Object.keys(e).sort().map(t=>`${t}:${k(e[t])}`).join("|"):e}function de(e){let t=0,r,n;if(e.length===0)return t;for(r=0;r<e.length;r++)n=e.charCodeAt(r),t=(t<<5)-t+n,t|=0;return t}const Ie=Object.freeze(Object.defineProperty({__proto__:null,hashCode:de,jsonStream:k},Symbol.toStringTag,{value:"Module"})),D={};function ge(e,t,r=0){if(r===0){t();return}const n=D[e];n&&clearTimeout(n),D[e]=setTimeout(()=>{delete D[e],t()},r)}const he=e=>new Promise(t=>setTimeout(t,e));async function me(e,t){const r=new Promise((n,i)=>{setTimeout(()=>i(new Error(`Timeout superato dopo ${e}ms`)),e)});return Promise.race([t,r])}function*pe(e,t,r){const n=new Date(e).getTime(),i=new Date(t).getTime(),[s,u]=n<i?[n,i]:[i,n];let l=new Date(s);for(;l.getTime()<=u;)yield l.getTime(),l.setDate(l.getDate()+r)}const ze=Object.freeze(Object.defineProperty({__proto__:null,debounce:ge,delay:he,forDates:pe,waitTimeout:me},Symbol.toStringTag,{value:"Module"}));function _e(e){const t={};return(...r)=>{const n=JSON.stringify(r);let i=t[n];return i||(i=e(...r),t[n]=i),i}}const Re=Object.freeze(Object.defineProperty({__proto__:null,memoize:_e},Symbol.toStringTag,{value:"Module"})),c={};async function Ae(e){const t=await c.promises.readdir(e);let r=0,n=null,i=0,s=Date.now();for(const u of t){const l=await c.promises.stat(c.join(e,u));r+=l.size;const f=Math.abs(s-l.birthtimeMs);f>i&&(i=f,n=u)}return{size:r,fileOld:n}}async function Oe(e){await T(e)||c.promises.mkdir(e,{recursive:!0})}async function we(e,t=!0){if(t&&!K(process.cwd(),e)||!await T(e))return!1;try{return await c.promises.rm(e,{recursive:!0,force:!0}),!0}catch{return!1}}function K(e,t){const r=c.relative(e,t);return r&&!r.startsWith("..")&&!c.isAbsolute(r)}async function T(e){try{await c.promises.access(e,c.constants.F_OK)}catch{return!1}return!0}const $e=Object.freeze(Object.defineProperty({__proto__:null,createDirIfNotExist:Oe,deleteIfExist:we,getDirInfo:Ae,getIfExists:T,isSubDir:K},Symbol.toStringTag,{value:"Module"}));class ve{constructor(t){t&&Array.isArray(t)&&(this.eventsCallbacks=t.reduce((r,n)=>(r[n]=[],r),{}))}eventsCallbacks={};on(t,r){if(t=="*"&&(t=Object.keys(this.eventsCallbacks)),Array.isArray(t))return t.forEach(i=>this.on(i,r));let n=this.eventsCallbacks[t];n||(n=[],this.eventsCallbacks[t]=n),n.push(r)}off(t,r){if(t=="*"&&(t=Object.keys(this.eventsCallbacks)),Array.isArray(t))return t.forEach(i=>this.off(i,r));let n=this.eventsCallbacks[t];if(n){if(!r)return this.eventsCallbacks[t]=[];this.eventsCallbacks[t]=n.filter(i=>i!=r)}}offAll(t){if(!t){this.eventsCallbacks={};return}delete this.eventsCallbacks[t]}once(t,r){this.on(t,n=>{r(n),this.off(t,r)})}emit(t,r){const n=(this.eventsCallbacks[t]??[]).concat(this.eventsCallbacks.$??[]);for(const i of n)i({event:t,payload:r})}}function xe(e){const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}async function Se(){return await navigator.clipboard.readText()}const Ue={set:xe,get:Se},y={Reset:"\x1B[0m",FgRed:"\x1B[31m",FgGreen:"\x1B[32m",FgYellow:"\x1B[33m",FgMagenta:"\x1B[35m",FgCyan:"\x1B[36m"},De=[y.FgGreen,y.FgCyan,y.FgYellow,y.FgRed,y.FgMagenta],Pe=["DEBUG: ","INFO: ","WARNING: ","ERROR: ","FATAL: "];var x;(function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARNING=2]="WARNING",e[e.ERROR=3]="ERROR",e[e.FATAL=4]="FATAL"})(x||(x={}));var g;(function(e){e[e.PROD=0]="PROD",e[e.DEV=1]="DEV",e[e.DEBUG=3]="DEBUG"})(g||(g={}));function _(e,t=x.INFO,r){_.options.enabled==!1||_.options.level==g.PROD||_.options.level==g.DEV&&t==x.DEBUG||(console.log(`${De[t]}${Pe[t]}${y.Reset}${e}`),r!=null&&console.log(r))}_.options={level:g.DEV,enabled:!0};const N=256;function ke(e,t){let r=Math.sin(e*Math.PI/180);return r=Math.min(Math.max(r,-.9999),.9999),{x:N*(.5+t/360),y:N*(.5-Math.log((1+r)/(1-r))/(4*Math.PI))}}function Me(e,t,r,n){var i=6371,s=h(r-e),u=h(n-t),l=Math.sin(s/2)*Math.sin(s/2)+Math.cos(h(e))*Math.cos(h(r))*Math.sin(u/2)*Math.sin(u/2),f=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),a=i*f;return a}function h(e){return e*(Math.PI/180)}const qe=Object.freeze(Object.defineProperty({__proto__:null,distance:Me,gmPoint:ke},Symbol.toStringTag,{value:"Module"}));function W(e){return!!/^[^\s@]+@[^\s@]+$/.test(e)}function Ee(e){return e!=null&&e.trim().length>0}function Ce(e){return!!(Array.isArray(e)&&e.length>0)}function V(e){var t=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return!!t.test(e)}function M(e,t){if(!t)return!0;if(typeof t=="string"){const r=t.charAt(0)=="?";if(r&&(t=t.slice(1)),r&&e==null)return!0;const[n,i]=t.split(":");switch(n){case"email":return W(e);case"url":return V(e);case"tel":return/^[+]?[\s./0-9]*[(]?[0-9]{1,4}[)]?[-\s./0-9]*$/g.test(e);case"string":return typeof e!="string"?!1:m(e.trim().length,i);case"array":return Array.isArray(e)?m(e.length,i):!1;case"int":return Number.isInteger(e)?m(e,i):!1;case"number":return Number.isFinite(e)?m(e,i):!1}return!0}if(Array.isArray(t))return t.every(r=>M(e,r));if(typeof t=="object"){const r=Object.keys(t);for(const n of r){const i=e[n],s=t[n];if(M(i,s)==!1)return!1}}return!0}function m(e,t){if(t==null||t.length==0)return!0;let r=t.charAt(0),n;switch(isNaN(r)?n=+t.slice(1):(r="=",n=+t),r){case"=":return e==n;case">":return e>n;case"<":return e<n;case"!":return e!=n;default:return!0}}const Be=Object.freeze(Object.defineProperty({__proto__:null,email:W,obligatory:Ee,obligatoryArray:Ce,url:V,verify:M},Symbol.toStringTag,{value:"Module"})),Ke={...j,...L};export{ve as EventEmitter,qe as GeoPosition,g as LOG_LEVEL,x as LOG_TYPE,Be as Validator,Fe as array,Ue as clipboard,Te as diff,Ke as eq,Ne as explore,$e as filesystem,Re as func,Ie as json,_ as log,be as obj,ze as time};
//# sourceMappingURL=jon-utils-BOE1HnBI.js.map
